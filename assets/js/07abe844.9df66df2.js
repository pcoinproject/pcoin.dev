"use strict";(self.webpackChunkpcoin_website=self.webpackChunkpcoin_website||[]).push([[3594],{4137:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return g}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(n),g=r,h=d["".concat(s,".").concat(g)]||d[g]||c[g]||i;return n?o.createElement(h,a(a({ref:t},u),{},{components:n})):o.createElement(h,a({ref:t},u))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,a[1]=l;for(var p=2;p<i;p++)a[p]=n[p];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9717:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return g},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return c}});var o=n(3117),r=n(102),i=(n(7294),n(4137)),a=["components"],l={title:"Troubleshooting",sidebar_position:32},s="Troubleshooting an issue in PCOINPay Server",p={unversionedId:"PcoinPay/Guide/Troubleshooting",id:"PcoinPay/Guide/Troubleshooting",title:"Troubleshooting",description:"Facing a problem is never fun. This document explains the most common workflow and steps you should take to identify the issue you're having more easily and hopefully solve it yourself or with community help.",source:"@site/docs/PcoinPay/Guide/Troubleshooting.md",sourceDirName:"PcoinPay/Guide",slug:"/PcoinPay/Guide/Troubleshooting",permalink:"/docs/PcoinPay/Guide/Troubleshooting",draft:!1,editUrl:"https://github.com/pcoinproject/pcoin.dev/edit/master/docs/PcoinPay/Guide/Troubleshooting.md",tags:[],version:"current",sidebarPosition:32,frontMatter:{title:"Troubleshooting",sidebar_position:32},sidebar:"tutorialSidebar",previous:{title:"Trocador",permalink:"/docs/PcoinPay/Guide/Trocador"},next:{title:"Support",permalink:"/docs/PcoinPay/Guide/Support"}},u={},c=[{value:"1. Replicating the issue",id:"1-replicating-the-issue",level:2},{value:"1.1 Updating the server",id:"11-updating-the-server",level:3},{value:"1.2 Restarting the server",id:"12-restarting-the-server",level:3},{value:"1.3 Restarting a service",id:"13-restarting-a-service",level:3},{value:"2. Looking through the logs",id:"2-looking-through-the-logs",level:2},{value:"2.1 PCOINPay Logs",id:"21-pcoinpay-logs",level:3},{value:"2.2 Lightning Network Logs",id:"22-lightning-network-logs",level:3},{value:"2.2.1 - Lightning Network LND - Docker",id:"221---lightning-network-lnd---docker",level:3},{value:"2.2.2 - Lightning Network c-lightning - Docker",id:"222---lightning-network-c-lightning---docker",level:3},{value:"2.3 - Bitcoin Node Logs",id:"23---bitcoin-node-logs",level:2},{value:"3. Finding a solution yourself (Google, FAQ, GitHub issues)",id:"3-finding-a-solution-yourself-google-faq-github-issues",level:2},{value:"3.1 PCOINPay FAQ",id:"31-pcoinpay-faq",level:3},{value:"3.2 GitHub",id:"32-github",level:3},{value:"3.3 Mattermost",id:"33-mattermost",level:3},{value:"4. Asking for help",id:"4-asking-for-help",level:2},{value:"4.1 Opening an Issue on GitHub (advanced problems)",id:"41-opening-an-issue-on-github-advanced-problems",level:3}],d={toc:c};function g(e){var t=e.components,n=(0,r.Z)(e,a);return(0,i.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"troubleshooting-an-issue-in-pcoinpay-server"},"Troubleshooting an issue in PCOINPay Server"),(0,i.kt)("p",null,"Facing a problem is never fun. This document explains the most common workflow and steps you should take to ",(0,i.kt)("strong",{parentName:"p"},"identify the issue")," you're having more easily and hopefully solve it yourself or with community help."),(0,i.kt)("p",null,"Identifying the problem is crucial."),(0,i.kt)("h2",{id:"1-replicating-the-issue"},"1. Replicating the issue"),(0,i.kt)("p",null,"First and foremost, try to determine when the issue happens.\nTry to replicate the problem.\nTry to update and restart your server to verify you can reproduce your issue.\nIf you think it will describe your issue better, take a screenshot."),(0,i.kt)("h3",{id:"11-updating-the-server"},"1.1 Updating the server"),(0,i.kt)("p",null,"Check ",(0,i.kt)("a",{parentName:"p",href:"../FAQ/ServerSettings.md#how-can-i-see-my-pcoinpay-version"},"your version of PCOINPay"),".\nIf it is much older than the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/pcoinproject/pcoinpayserver/releases"},"latest version")," of PCOINPay, ",(0,i.kt)("a",{parentName:"p",href:"../FAQ/ServerSettings.md#how-to-update-pcoinpay-server"},"updating your server")," may resolve the issue."),(0,i.kt)("h3",{id:"12-restarting-the-server"},"1.2 Restarting the server"),(0,i.kt)("p",null,"Restarting your server is an easy way to solve many of the most common PCOINPay Server issues.\nYou may need to ",(0,i.kt)("a",{parentName:"p",href:"../FAQ/ServerSettings.md#how-to-ssh-into-my-pcoinpay-running-on-vps"},"SSH into your server")," to restart it."),(0,i.kt)("h3",{id:"13-restarting-a-service"},"1.3 Restarting a service"),(0,i.kt)("p",null,"Some issues you may only need to restart a particular service in your PCOINPay Server deployment.\nSuch as restarting the letsencrypt container to renew the SSL certificate."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo su -\ncd pcoinpayserver-docker\ndocker restart letsencrypt-nginx-proxy-companion\n")),(0,i.kt)("p",null,"Use ",(0,i.kt)("inlineCode",{parentName:"p"},"docker ps")," to find the name of a different service you would like to restart."),(0,i.kt)("h2",{id:"2-looking-through-the-logs"},"2. Looking through the logs"),(0,i.kt)("p",null,"Logs can provide an essential piece of information.\nIn the next few paragraphs, we will describe how to get the ",(0,i.kt)("strong",{parentName:"p"},"log information for various parts of PCOINPay"),"."),(0,i.kt)("h3",{id:"21-pcoinpay-logs"},"2.1 PCOINPay Logs"),(0,i.kt)("p",null,"Since the v1.0.3.8, you can easily access PCOINPay Server logs from the front-end.\nIf you are a server admin, go to ",(0,i.kt)("strong",{parentName:"p"},"Server Settings > Logs")," and open the logs file.\nIf you don't know what a particular error in the logs means, make sure to mention it when troubleshooting."),(0,i.kt)("p",null,"If you would like more detailed logs and you're using a Docker deployment, you can view logs of specific Docker containers using the command line.\nSee these ",(0,i.kt)("a",{parentName:"p",href:"../FAQ/ServerSettings.md#how-to-ssh-into-my-pcoinpay-running-on-vps"},"instructions to ssh")," into an instance of PCOINPay running on a VPS."),(0,i.kt)("p",null,"Below is a general list of the container names used for PCOINPay."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"LOGS FOR"),(0,i.kt)("th",{parentName:"tr",align:"center"},"CONTAINER NAME"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"PCOINPayServer"),(0,i.kt)("td",{parentName:"tr",align:"center"},"generated_pcoinpayserver_1")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"NBXplorer"),(0,i.kt)("td",{parentName:"tr",align:"center"},"generated_nbxplorer_1")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Bitcoind"),(0,i.kt)("td",{parentName:"tr",align:"center"},"pcoinpayserver_bitcoind")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Postgres"),(0,i.kt)("td",{parentName:"tr",align:"center"},"generated_postgres_1")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"proxy"),(0,i.kt)("td",{parentName:"tr",align:"center"},"letsencrypt-nginx-proxy-companion")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Nginx"),(0,i.kt)("td",{parentName:"tr",align:"center"},"nginx-gen")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Nginx"),(0,i.kt)("td",{parentName:"tr",align:"center"},"nginx")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"c-lightning"),(0,i.kt)("td",{parentName:"tr",align:"center"},"pcoinpayserver_clightning_bitcoin")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"LND"),(0,i.kt)("td",{parentName:"tr",align:"center"},"pcoinpayserver_lnd_bitcoin")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"RTL"),(0,i.kt)("td",{parentName:"tr",align:"center"},"generated_lnd_bitcoin_rtl_1")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Thunderhub"),(0,i.kt)("td",{parentName:"tr",align:"center"},"generated_bitcoin_thub_1")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"LibrePatron"),(0,i.kt)("td",{parentName:"tr",align:"center"},"librepatron")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Tor"),(0,i.kt)("td",{parentName:"tr",align:"center"},"tor-gen")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Tor"),(0,i.kt)("td",{parentName:"tr",align:"center"},"tor")))),(0,i.kt)("p",null,"Run the commands below to print logs by container name.\nReplace the container name to view other container logs."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo su -\ncd pcoinpayserver-docker\ndocker ps\ndocker logs --tail 100 generated_pcoinpayserver_1\n")),(0,i.kt)("h3",{id:"22-lightning-network-logs"},"2.2 Lightning Network Logs"),(0,i.kt)("p",null,"Use the following if you're having a problem with the Lightning Network."),(0,i.kt)("h3",{id:"221---lightning-network-lnd---docker"},"2.2.1 - Lightning Network LND - Docker"),(0,i.kt)("p",null,"There are a few ways to access your LND logs when using Docker.\nFirst log in as root:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"sudo su -")),(0,i.kt)("p",null,"Navigate to the correct directory:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"cd pcoinpayserver-docker")),(0,i.kt)("p",null,"Find container name:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"docker ps")),(0,i.kt)("p",null,"Print logs by container name:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"docker logs --tail 100 pcoinpayserver_lnd_bitcoin")),(0,i.kt)("p",null,"Alternatively, you can quickly print logs by using container ID (only the first unique ID characters are needed, such as the two furthest left characters):"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"docker logs 'add your container ID '")),(0,i.kt)("p",null,"If for any reason you need more logs"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"sudo su -")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"cd /var/lib/docker/volumes/generated_lnd_bitcoin_datadir/_data/logs/bitcoin/mainnet/")),(0,i.kt)("p",null,"inside that directory do ",(0,i.kt)("inlineCode",{parentName:"p"},"ls")),(0,i.kt)("p",null,"You will see something like ",(0,i.kt)("inlineCode",{parentName:"p"},"lnd.log lnd.log.13 lnd.log.15 lnd.log.16.gz lnd.log.17.gz")),(0,i.kt)("p",null,"To access uncompressed logs of those logs do ",(0,i.kt)("inlineCode",{parentName:"p"},"cat lnd.log")," or if you want another one, use ",(0,i.kt)("inlineCode",{parentName:"p"},"cat lnd.log.15")),(0,i.kt)("p",null,"To access compressed logs in .gzip use ",(0,i.kt)("inlineCode",{parentName:"p"},"gzip -d lnd.log.16.gz")," (in this case we're accessing lnd.log.16.gz)"),(0,i.kt)("p",null,"This should give you a new file, where you can do ",(0,i.kt)("inlineCode",{parentName:"p"},"cat lnd.log.16")),(0,i.kt)("p",null,"In case the above does not work, you may need to use install gzip first ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo apt-get install gzip")),(0,i.kt)("h3",{id:"222---lightning-network-c-lightning---docker"},"2.2.2 - Lightning Network c-lightning - Docker"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"sudo su -")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"docker ps")),(0,i.kt)("p",null,"Find the c-lightning container ID."),(0,i.kt)("p",null,"docker logs 'add your container ID here'"),(0,i.kt)("p",null,"alternatively, use this"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"docker logs --tail 100 pcoinpayserver_clightning_bitcoin")),(0,i.kt)("p",null,"You can also get log information with c-lightning cli command."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"bitcoin-lightning-cli.sh getlog")),(0,i.kt)("h2",{id:"23---bitcoin-node-logs"},"2.3 - Bitcoin Node Logs"),(0,i.kt)("p",null,"In addition to ",(0,i.kt)("a",{parentName:"p",href:"#2-looking-through-the-logs"},"looking at logs")," of your Bitcoind container, you can also use any of the ",(0,i.kt)("a",{parentName:"p",href:"https://developer.bitcoin.org/reference/rpc/index.html"},"bitcoin-cli commands")," to obtain information from your bitcoin node.\nPCOINPay includes a script to allow you to communicate with your Bitcoin node easily."),(0,i.kt)("p",null,"Inside the ",(0,i.kt)("inlineCode",{parentName:"p"},"pcoinpayserver-docker")," folder, get the blockchain information using your node:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"bitcoin-cli.sh getblockchaininfo")),(0,i.kt)("h2",{id:"3-finding-a-solution-yourself-google-faq-github-issues"},"3. Finding a solution yourself (Google, FAQ, GitHub issues)"),(0,i.kt)("p",null,"Even though setups differ, the chances that someone else experienced the same issue as yours are pretty high.\nTake a few moments, Google around and see if you can solve it yourself."),(0,i.kt)("h3",{id:"31-pcoinpay-faq"},"3.1 PCOINPay FAQ"),(0,i.kt)("p",null,"We try to document the most common issues on the ",(0,i.kt)("a",{parentName:"p",href:"../FAQ/README.md"},"Frequently Asked Questions page"),".\nTake a look there and see if your question is recorded."),(0,i.kt)("h3",{id:"32-github"},"3.2 GitHub"),(0,i.kt)("p",null,"When there's an advanced technical issue, users usually open an issue on GitHub.\nTake a look at the PCOINPay GitHub repository and browse ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/pcoinproject/pcoinpayserver/issues?q=is%3Aissue+is%3Aclosed"},"search the closed issues"),"."),(0,i.kt)("h3",{id:"33-mattermost"},"3.3 Mattermost"),(0,i.kt)("p",null,"Mattermost chat platform is great for similar issues, other users experienced before you.\nOn the top right-hand corner, click on the search and enter your query."),(0,i.kt)("h2",{id:"4-asking-for-help"},"4. Asking for help"),(0,i.kt)("p",null,"If you're unable to solve the problem yourself, do not worry.\nThere's an amid community ready to help you."),(0,i.kt)("p",null,"The better you describe the problem, the higher are the chances of getting a timely fix.\nBe concise and provide as much relevant information as possible.\nBe sure to include the ",(0,i.kt)("a",{parentName:"p",href:"../FAQ/ServerSettings.md#how-can-i-see-my-pcoinpay-version"},"version you're using")," and describe your PCOINPay Deployment Setup.\nTry to explain what you're trying to do and what's the issue.\nIf you can provide the logs.\nIf you think it's relevant, feel free to include a screenshot."),(0,i.kt)("p",null,"Here's a good example of how to ask a question."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"I'm having a problem with XYZ. I can replicate the problem. My PCOINPay version is 0.100.31, and I deployed my server on Digital Ocean by following Docker deployment guide. I've searched through the FAQ and closed GitHub issues, but there's no solution to my problem. My PCOINPay Setup is XYZ, and the issue is occurring when I do XYZ. Here are the logs I was able to get from my PCOINPay instance. You can see the error in the image I attached.")),(0,i.kt)("admonition",{title:"Please note:",type:"warning"},(0,i.kt)("p",{parentName:"admonition"},"The community will not provide extensive support for custom deployments.\nI.e. variations of ",(0,i.kt)("a",{parentName:"p",href:"../Deployment/ManualDeployment.md"},"Manual Deployments")," are expected to be used only for development purposes and by users with technical literacy with the ability to ",(0,i.kt)("strong",{parentName:"p"},"resolve deployment and maintenance issues on their own"),". This includes ",(0,i.kt)("a",{parentName:"p",href:"../Deployment/HardwareAsAService.md"},"Hardware-As-A-Service")," products (Nodl, RaspiBlitz, Umbrel, etc ...)")),(0,i.kt)("h3",{id:"41-opening-an-issue-on-github-advanced-problems"},"4.1 Opening an Issue on GitHub (advanced problems)"),(0,i.kt)("p",null,"If you have a custom build setup and are facing a complex problem, ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/pcoinproject/pcoinpayserver/issues"},"open an issue on GitHub")," so that developers can help you out."))}g.isMDXComponent=!0}}]);